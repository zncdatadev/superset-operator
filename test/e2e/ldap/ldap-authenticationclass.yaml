---
apiVersion: authentication.kubedoop.dev/v1alpha1
kind: AuthenticationClass
metadata:
  name: ldap
spec:
  provider:
    ldap:
      hostname: lldap
      searchBase: ou=people,dc=example,dc=com
      ldapFieldNames:
        email: mail
        uid: uid
      bindCredentials:
        secretClass: superset-ldap
      port: 3890
---
apiVersion: secrets.kubedoop.dev/v1alpha1
kind: SecretClass
metadata:
  name: superset-ldap
spec:
  backend:
    k8sSearch:
      searchNamespace:
        pod: {}
---
apiVersion: v1
kind: Secret
metadata:
  name: superset-ldap
  labels:
    secrets.kubedoop.dev/class: superset-ldap
type: Opaque
stringData:
  user: ($ldap_admin_dn)
  password: ($ldap_admin_password)
